const n=JSON.parse(`{"key":"v-d0632e50","path":"/code-note/vue/Vue2%E4%B8%AD%E7%9A%84%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1.html","title":"Vue2中的组件通信","lang":"zh-CN","frontmatter":{"description":"Vue2中的组件通信 基本场景 父子组件 兄弟组件 祖孙组件 非关系组件 通信方案 props + emit 适用于 父子组件、兄弟组件、祖孙组件 // parentCom.vue &lt;template&gt; \\t&lt;childCom :name = \\"name\\" @onNameChange=\\"onNameChange\\"&gt;&lt;/childCom&gt; &lt;/template&gt; &lt;script&gt; \\texport default { data(){ return { name:'Kevin' } } methods:{ onNameChange(newVal){ this.name = newVal } } } &lt;/script&gt; // ChildCom.vue &lt;template&gt; \\t&lt;span&gt;{{name}}&lt;/span&gt; // Kevin \\t&lt;button @click = \\"$emit('onNameChange','newVal')\\"&gt; &lt;/button&gt; &lt;/template&gt; &lt;script&gt; export default { props:['name'], } &lt;/script&gt; $attrs + $listeners $attrs 以对象形式返回所有不是props的属性(class和 style除外) // grandParentCom.vue &lt;template&gt; \\t&lt;parentCom name=\\"grandParentName\\" @updateName=\\"onUpdateName\\"&gt;&lt;/parentCom&gt; &lt;/template&gt; &lt;script&gt; &lt;/script&gt; // parentCom.vue &lt;template&gt; \\t&lt;childCom v-bind=\\"$attrs\\" v-on=\\"$listeners\\"&gt;&lt;/childCom&gt; &lt;/template&gt; &lt;script&gt; export default { inheritAttrs:false, methods: { onUpdateName() {} } } &lt;/script&gt; // childCom.vue &lt;template&gt; \\t{{ name }} // grandParentName &lt;/template&gt; &lt;script&gt; export default { props:['name'], methods:{ handleUpadate() { this.$emit(\\"updateName\\", \\"updateName-Kevin\\"); } } } &lt;/script&gt; ref 适用于 父子组件、祖孙组件 // parentCom.vue &lt;template&gt; \\t&lt;childCom ref=\\"childComRef\\"&gt;&lt;/childCom&gt; &lt;/template&gt; &lt;script&gt; \\texport default { methods:{ getChild(){ this.$refs.name } } } &lt;/script&gt; $parent + children+children +children+emit 适用于 父子组件、兄弟组件 // parentCom.vue &lt;template&gt; \\t&lt;childCom1&gt;&lt;/childCom1&gt; \\t&lt;childCom2&gt;&lt;/childCom2&gt; &lt;/template&gt; &lt;script&gt; \\texport default { data(){ return { count: 666 } } } &lt;/script&gt; // childCom1 &lt;template&gt; \\t{{ $parent.count}} &lt;/template&gt; &lt;script&gt; \\texport default { } &lt;/script&gt; // childCom2 &lt;template&gt; \\t{{ $parent.count}} &lt;/template&gt; &lt;script&gt; \\texport default { \\t\\t } &lt;/script&gt; provide + inject 适用于 父子组件、祖孙组件 在Vue2.x中默认不是响应式的，app.config.unwrapInjectedRef = true 以保证注入会自动解包这个计算属性，这将会在 Vue 3.3 后成为一个默认行为。 // grandParentCom.vue &lt;template&gt; \\t&lt;parentCom&gt;&lt;/parentCom&gt; &lt;/template&gt; &lt;script&gt; export default { data(){ return { \\t\\tmessage:\\"i am parentCom\\" } }, \\tprovide(){ return { message: computed(() =&gt; this.message) } } } &lt;/script&gt; // parentCom.vue &lt;template&gt; \\t&lt;section&gt; \\t&lt;span&gt;{{ message }}&lt;/span&gt; // 'i am parentCom' \\t\\t&lt;childCom&gt;&lt;/childCom&gt; &lt;/section&gt; &lt;/template&gt; &lt;script&gt; export default { inject:['message'] } &lt;/script&gt; // childCom.vue &lt;template&gt; \\t&lt;span&gt;{{ message }}&lt;/span&gt; // 'i am parentCom' &lt;/template&gt; &lt;script&gt; export default { inject:['message'] } &lt;/script&gt; EventBus 适用于 兄弟组件传值 // 创建一个中央时间总线类 class Bus { constructor() { this.callbacks = {}; // 存放事件的名字 } $on(name, fn) { this.callbacks[name] = this.callbacks[name] || []; this.callbacks[name].push(fn); } $emit(name, args) { if (this.callbacks[name]) { this.callbacks[name].forEach((cb) =&gt; cb(args)); } } } // main.js Vue.prototype.$bus = new Bus() // 将$bus挂载到vue实例的原型上 // 另一种方式 Vue.prototype.$bus = new Vue() // Vue已经实现了Bus的功能 // parentCom.vue &lt;template&gt; \\t&lt;childCom1&gt;&lt;/childCom1&gt; \\t&lt;childCom2&gt;&lt;/childCom2&gt; &lt;/temaplate&gt; // childCom1.vue &lt;script&gt; export default { data() { \\treturn { msg:\\"msgmsgmsg\\" } }, methods:{ sendMsg() { this.$bus.emit('changeMessage',this.msg) } } } &lt;/script&gt; // childCom1.vue &lt;script&gt; export default { data() { \\treturn { msg:\\"msgmsgmsg\\" } }, created() { this.$bus.$on('foo', this.setMsg) }, methods:{ setMsg(msg) { \\tthis.msg = msg } } } &lt;/script&gt; VueX / Pinia 适用于 所有场景","head":[["meta",{"property":"og:url","content":"https://kevinzzzgit.github.io/code-note/vue/Vue2%E4%B8%AD%E7%9A%84%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1.html"}],["meta",{"property":"og:site_name","content":"KevinZzz BLOG"}],["meta",{"property":"og:title","content":"Vue2中的组件通信"}],["meta",{"property":"og:description","content":"Vue2中的组件通信 基本场景 父子组件 兄弟组件 祖孙组件 非关系组件 通信方案 props + emit 适用于 父子组件、兄弟组件、祖孙组件 // parentCom.vue &lt;template&gt; \\t&lt;childCom :name = \\"name\\" @onNameChange=\\"onNameChange\\"&gt;&lt;/childCom&gt; &lt;/template&gt; &lt;script&gt; \\texport default { data(){ return { name:'Kevin' } } methods:{ onNameChange(newVal){ this.name = newVal } } } &lt;/script&gt; // ChildCom.vue &lt;template&gt; \\t&lt;span&gt;{{name}}&lt;/span&gt; // Kevin \\t&lt;button @click = \\"$emit('onNameChange','newVal')\\"&gt; &lt;/button&gt; &lt;/template&gt; &lt;script&gt; export default { props:['name'], } &lt;/script&gt; $attrs + $listeners $attrs 以对象形式返回所有不是props的属性(class和 style除外) // grandParentCom.vue &lt;template&gt; \\t&lt;parentCom name=\\"grandParentName\\" @updateName=\\"onUpdateName\\"&gt;&lt;/parentCom&gt; &lt;/template&gt; &lt;script&gt; &lt;/script&gt; // parentCom.vue &lt;template&gt; \\t&lt;childCom v-bind=\\"$attrs\\" v-on=\\"$listeners\\"&gt;&lt;/childCom&gt; &lt;/template&gt; &lt;script&gt; export default { inheritAttrs:false, methods: { onUpdateName() {} } } &lt;/script&gt; // childCom.vue &lt;template&gt; \\t{{ name }} // grandParentName &lt;/template&gt; &lt;script&gt; export default { props:['name'], methods:{ handleUpadate() { this.$emit(\\"updateName\\", \\"updateName-Kevin\\"); } } } &lt;/script&gt; ref 适用于 父子组件、祖孙组件 // parentCom.vue &lt;template&gt; \\t&lt;childCom ref=\\"childComRef\\"&gt;&lt;/childCom&gt; &lt;/template&gt; &lt;script&gt; \\texport default { methods:{ getChild(){ this.$refs.name } } } &lt;/script&gt; $parent + children+children +children+emit 适用于 父子组件、兄弟组件 // parentCom.vue &lt;template&gt; \\t&lt;childCom1&gt;&lt;/childCom1&gt; \\t&lt;childCom2&gt;&lt;/childCom2&gt; &lt;/template&gt; &lt;script&gt; \\texport default { data(){ return { count: 666 } } } &lt;/script&gt; // childCom1 &lt;template&gt; \\t{{ $parent.count}} &lt;/template&gt; &lt;script&gt; \\texport default { } &lt;/script&gt; // childCom2 &lt;template&gt; \\t{{ $parent.count}} &lt;/template&gt; &lt;script&gt; \\texport default { \\t\\t } &lt;/script&gt; provide + inject 适用于 父子组件、祖孙组件 在Vue2.x中默认不是响应式的，app.config.unwrapInjectedRef = true 以保证注入会自动解包这个计算属性，这将会在 Vue 3.3 后成为一个默认行为。 // grandParentCom.vue &lt;template&gt; \\t&lt;parentCom&gt;&lt;/parentCom&gt; &lt;/template&gt; &lt;script&gt; export default { data(){ return { \\t\\tmessage:\\"i am parentCom\\" } }, \\tprovide(){ return { message: computed(() =&gt; this.message) } } } &lt;/script&gt; // parentCom.vue &lt;template&gt; \\t&lt;section&gt; \\t&lt;span&gt;{{ message }}&lt;/span&gt; // 'i am parentCom' \\t\\t&lt;childCom&gt;&lt;/childCom&gt; &lt;/section&gt; &lt;/template&gt; &lt;script&gt; export default { inject:['message'] } &lt;/script&gt; // childCom.vue &lt;template&gt; \\t&lt;span&gt;{{ message }}&lt;/span&gt; // 'i am parentCom' &lt;/template&gt; &lt;script&gt; export default { inject:['message'] } &lt;/script&gt; EventBus 适用于 兄弟组件传值 // 创建一个中央时间总线类 class Bus { constructor() { this.callbacks = {}; // 存放事件的名字 } $on(name, fn) { this.callbacks[name] = this.callbacks[name] || []; this.callbacks[name].push(fn); } $emit(name, args) { if (this.callbacks[name]) { this.callbacks[name].forEach((cb) =&gt; cb(args)); } } } // main.js Vue.prototype.$bus = new Bus() // 将$bus挂载到vue实例的原型上 // 另一种方式 Vue.prototype.$bus = new Vue() // Vue已经实现了Bus的功能 // parentCom.vue &lt;template&gt; \\t&lt;childCom1&gt;&lt;/childCom1&gt; \\t&lt;childCom2&gt;&lt;/childCom2&gt; &lt;/temaplate&gt; // childCom1.vue &lt;script&gt; export default { data() { \\treturn { msg:\\"msgmsgmsg\\" } }, methods:{ sendMsg() { this.$bus.emit('changeMessage',this.msg) } } } &lt;/script&gt; // childCom1.vue &lt;script&gt; export default { data() { \\treturn { msg:\\"msgmsgmsg\\" } }, created() { this.$bus.$on('foo', this.setMsg) }, methods:{ setMsg(msg) { \\tthis.msg = msg } } } &lt;/script&gt; VueX / Pinia 适用于 所有场景"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-03T03:31:15.000Z"}],["meta",{"property":"article:author","content":"KevinZzz"}],["meta",{"property":"article:modified_time","content":"2023-08-03T03:31:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Vue2中的组件通信\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-08-03T03:31:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"KevinZzz\\"}]}"]]},"headers":[{"level":2,"title":"基本场景","slug":"基本场景","link":"#基本场景","children":[]},{"level":2,"title":"通信方案","slug":"通信方案","link":"#通信方案","children":[]}],"git":{"createdTime":1691033475000,"updatedTime":1691033475000,"contributors":[{"name":"KevinZzz","email":"416014688@qq.com","commits":1}]},"readingTime":{"minutes":1.75,"words":526},"filePathRelative":"code-note/vue/Vue2中的组件通信.md","localizedDate":"2023年8月3日","excerpt":"<h1> Vue2中的组件通信</h1>\\n<h2> 基本场景</h2>\\n<ul>\\n<li>父子组件</li>\\n<li>兄弟组件</li>\\n<li>祖孙组件</li>\\n<li>非关系组件</li>\\n</ul>\\n<h2> 通信方案</h2>\\n<ol>\\n<li>\\n<p>props + emit</p>\\n<ul>\\n<li>适用于 父子组件、兄弟组件、祖孙组件</li>\\n</ul>\\n<div class=\\"language-vue line-numbers-mode\\" data-ext=\\"vue\\"><pre class=\\"language-vue\\"><code>// parentCom.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>childCom</span> <span class=\\"token attr-name\\">:name</span> <span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span> <span class=\\"token punctuation\\">\\"</span>name<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">@onNameChange</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>onNameChange<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>childCom</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n\\t<span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">data</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token literal-property property\\">name</span><span class=\\"token operator\\">:</span><span class=\\"token string\\">'Kevin'</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token literal-property property\\">methods</span><span class=\\"token operator\\">:</span><span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token function\\">onNameChange</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">newVal</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>name <span class=\\"token operator\\">=</span> newVal\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n// ChildCom.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>span</span><span class=\\"token punctuation\\">&gt;</span></span>{{name}}<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>span</span><span class=\\"token punctuation\\">&gt;</span></span> // Kevin\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>button</span> <span class=\\"token attr-name\\">@click</span> <span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span> <span class=\\"token punctuation\\">\\"</span>$emit('onNameChange','newVal')<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span> <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>button</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n    <span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">props</span><span class=\\"token operator\\">:</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">'name'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div></li>\\n<li>\\n<p>$attrs + $listeners</p>\\n<ul>\\n<li>$attrs 以对象形式返回所有不是props的属性(<code>class</code>和 <code>style</code>除外)</li>\\n</ul>\\n<div class=\\"language-vue line-numbers-mode\\" data-ext=\\"vue\\"><pre class=\\"language-vue\\"><code>// grandParentCom.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>parentCom</span> <span class=\\"token attr-name\\">name</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>grandParentName<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">@updateName</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>onUpdateName<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>parentCom</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n// parentCom.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>childCom</span> <span class=\\"token attr-name\\">v-bind</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>$attrs<span class=\\"token punctuation\\">\\"</span></span> <span class=\\"token attr-name\\">v-on</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>$listeners<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>childCom</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n    <span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">inheritAttrs</span><span class=\\"token operator\\">:</span><span class=\\"token boolean\\">false</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">methods</span><span class=\\"token operator\\">:</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token function\\">onUpdateName</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n// childCom.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t{{ name }} // grandParentName\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n    <span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">props</span><span class=\\"token operator\\">:</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">'name'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">methods</span><span class=\\"token operator\\">:</span><span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token function\\">handleUpadate</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">$emit</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"updateName\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"updateName-Kevin\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div></li>\\n<li>\\n<p>ref</p>\\n<ul>\\n<li>适用于 父子组件、祖孙组件</li>\\n</ul>\\n<div class=\\"language-vue line-numbers-mode\\" data-ext=\\"vue\\"><pre class=\\"language-vue\\"><code>// parentCom.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>childCom</span> <span class=\\"token attr-name\\">ref</span><span class=\\"token attr-value\\"><span class=\\"token punctuation attr-equals\\">=</span><span class=\\"token punctuation\\">\\"</span>childComRef<span class=\\"token punctuation\\">\\"</span></span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>childCom</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n\\t<span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">methods</span><span class=\\"token operator\\">:</span><span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token function\\">getChild</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>$refs<span class=\\"token punctuation\\">.</span>name\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div></li>\\n<li>\\n<p>$parent + <span class=\\"katex\\"><span class=\\"katex-mathml\\"><math xmlns=\\"http://www.w3.org/1998/Math/MathML\\"><semantics><mrow><mi>c</mi><mi>h</mi><mi>i</mi><mi>l</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>n</mi><mo>+</mo></mrow><annotation encoding=\\"application/x-tex\\">children +</annotation></semantics></math></span><span class=\\"katex-html\\" aria-hidden=\\"true\\"><span class=\\"base\\"><span class=\\"strut\\" style=\\"height:0.7778em;vertical-align:-0.0833em;\\"></span><span class=\\"mord mathnormal\\">c</span><span class=\\"mord mathnormal\\">hi</span><span class=\\"mord mathnormal\\" style=\\"margin-right:0.01968em;\\">l</span><span class=\\"mord mathnormal\\">d</span><span class=\\"mord mathnormal\\">re</span><span class=\\"mord mathnormal\\">n</span><span class=\\"mord\\">+</span></span></span></span>emit</p>\\n<ul>\\n<li>适用于 父子组件、兄弟组件</li>\\n</ul>\\n<div class=\\"language-vue line-numbers-mode\\" data-ext=\\"vue\\"><pre class=\\"language-vue\\"><code>// parentCom.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>childCom1</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>childCom1</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>childCom2</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>childCom2</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n\\t<span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">data</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token literal-property property\\">count</span><span class=\\"token operator\\">:</span> <span class=\\"token number\\">666</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n// childCom1\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t{{ $parent.count}}\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n\\t<span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n       \\n    <span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n// childCom2\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t{{ $parent.count}}\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n\\t<span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n \\t\\t\\n    <span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div></li>\\n<li>\\n<p>provide + inject</p>\\n<ul>\\n<li>\\n<p>适用于 父子组件、祖孙组件</p>\\n</li>\\n<li>\\n<p>在Vue2.x中默认不是响应式的，<code>app.config.unwrapInjectedRef = true</code> 以保证注入会自动解包这个计算属性，这将会在 Vue 3.3 后成为一个默认行为。</p>\\n</li>\\n</ul>\\n<div class=\\"language-vue line-numbers-mode\\" data-ext=\\"vue\\"><pre class=\\"language-vue\\"><code>// grandParentCom.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>parentCom</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>parentCom</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n    <span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">data</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">{</span>\\n          \\t\\t<span class=\\"token literal-property property\\">message</span><span class=\\"token operator\\">:</span><span class=\\"token string\\">\\"i am parentCom\\"</span>      \\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n     \\t<span class=\\"token function\\">provide</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token literal-property property\\">message</span><span class=\\"token operator\\">:</span> <span class=\\"token function\\">computed</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>message<span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n// parentCom.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>section</span><span class=\\"token punctuation\\">&gt;</span></span>\\n    \\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>span</span><span class=\\"token punctuation\\">&gt;</span></span>{{ message }}<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>span</span><span class=\\"token punctuation\\">&gt;</span></span> // 'i am parentCom'\\n\\t\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>childCom</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>childCom</span><span class=\\"token punctuation\\">&gt;</span></span>\\n    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>section</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n    <span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">inject</span><span class=\\"token operator\\">:</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">'message'</span><span class=\\"token punctuation\\">]</span> \\n    <span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n// childCom.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>span</span><span class=\\"token punctuation\\">&gt;</span></span>{{ message }}<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>span</span><span class=\\"token punctuation\\">&gt;</span></span> // 'i am parentCom'\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n    <span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">inject</span><span class=\\"token operator\\">:</span><span class=\\"token punctuation\\">[</span><span class=\\"token string\\">'message'</span><span class=\\"token punctuation\\">]</span> \\n    <span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div></li>\\n<li>\\n<p>EventBus</p>\\n<ul>\\n<li>适用于 兄弟组件传值</li>\\n</ul>\\n<div class=\\"language-javascript line-numbers-mode\\" data-ext=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token comment\\">// 创建一个中央时间总线类  </span>\\n<span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">Bus</span> <span class=\\"token punctuation\\">{</span>  \\n  <span class=\\"token function\\">constructor</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>  \\n    <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>callbacks <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">;</span>   <span class=\\"token comment\\">// 存放事件的名字  </span>\\n  <span class=\\"token punctuation\\">}</span>  \\n  <span class=\\"token function\\">$on</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">name<span class=\\"token punctuation\\">,</span> fn</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>  \\n    <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>callbacks<span class=\\"token punctuation\\">[</span>name<span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>callbacks<span class=\\"token punctuation\\">[</span>name<span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">||</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span>  \\n    <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>callbacks<span class=\\"token punctuation\\">[</span>name<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">push</span><span class=\\"token punctuation\\">(</span>fn<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n  <span class=\\"token punctuation\\">}</span>  \\n  <span class=\\"token function\\">$emit</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">name<span class=\\"token punctuation\\">,</span> args</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>  \\n    <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>callbacks<span class=\\"token punctuation\\">[</span>name<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>  \\n      <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>callbacks<span class=\\"token punctuation\\">[</span>name<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">forEach</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">cb</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token function\\">cb</span><span class=\\"token punctuation\\">(</span>args<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>  \\n    <span class=\\"token punctuation\\">}</span>  \\n  <span class=\\"token punctuation\\">}</span>  \\n<span class=\\"token punctuation\\">}</span>  \\n  \\n<span class=\\"token comment\\">// main.js  </span>\\n<span class=\\"token class-name\\">Vue</span><span class=\\"token punctuation\\">.</span>prototype<span class=\\"token punctuation\\">.</span>$bus <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Bus</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token comment\\">// 将$bus挂载到vue实例的原型上  </span>\\n<span class=\\"token comment\\">// 另一种方式  </span>\\n<span class=\\"token class-name\\">Vue</span><span class=\\"token punctuation\\">.</span>prototype<span class=\\"token punctuation\\">.</span>$bus <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Vue</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token comment\\">// Vue已经实现了Bus的功能  </span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><div class=\\"language-vue line-numbers-mode\\" data-ext=\\"vue\\"><pre class=\\"language-vue\\"><code>// parentCom.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>template</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>childCom1</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>childCom1</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\t<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>childCom2</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>childCom2</span><span class=\\"token punctuation\\">&gt;</span></span>\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>temaplate</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n// childCom1.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n<span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">data</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    \\t<span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token literal-property property\\">msg</span><span class=\\"token operator\\">:</span><span class=\\"token string\\">\\"msgmsgmsg\\"</span>\\n        <span class=\\"token punctuation\\">}</span>  \\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token literal-property property\\">methods</span><span class=\\"token operator\\">:</span><span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">sendMsg</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>$bus<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">emit</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'changeMessage'</span><span class=\\"token punctuation\\">,</span><span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>msg<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n// childCom1.vue\\n<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>script</span><span class=\\"token punctuation\\">&gt;</span></span><span class=\\"token script\\"><span class=\\"token language-javascript\\">\\n<span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">default</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token function\\">data</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    \\t<span class=\\"token keyword\\">return</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token literal-property property\\">msg</span><span class=\\"token operator\\">:</span><span class=\\"token string\\">\\"msgmsgmsg\\"</span>\\n        <span class=\\"token punctuation\\">}</span>  \\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token function\\">created</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n      <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>$bus<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">$on</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'foo'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>setMsg<span class=\\"token punctuation\\">)</span>    \\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token literal-property property\\">methods</span><span class=\\"token operator\\">:</span><span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">setMsg</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">msg</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n           \\t<span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span>msg <span class=\\"token operator\\">=</span> msg\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n</span></span><span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>script</span><span class=\\"token punctuation\\">&gt;</span></span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div></li>\\n<li>\\n<p>VueX / Pinia</p>\\n<ul>\\n<li>适用于 所有场景</li>\\n</ul>\\n</li>\\n</ol>","autoDesc":true}`);export{n as data};
